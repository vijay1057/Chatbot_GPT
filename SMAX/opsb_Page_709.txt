Configure NFS volumes for CMS
To save information such as configuration files, the information must be stored in a persistent volume provided by a Network
File System (NFS). To install CMS, you need to export NFS volumes to store the application data.
The storage technology that provides NFS implementation must support the Kubernetes persistent mount option of
ReadWriteMany. That means a storage volume can be mounted to multiple nodes in read/write mode in parallel.
Each NFS exported volume must have the following settings:
rw
sync
Be configured in the 
/etc/exports
 file with the following text:
/<path to the shared folder on the NFS server> (rw,sync,anonuid=<user>,anongid=<fsGroup>,root_squash)
Where the 
<user>
 and 
<fsGroup>
 need to be of the same values as those of the 
global.securityContext.user
 and
global.securityContext.fsGroup
 parameters specified in the custom 
my-values.yaml
 file. For details, see the "Create
a custom values.yaml file" topic in the "Related topics" section.
Be configured with the following permissions:
chmod -R 755 <path to the exported volume>
chown <user>:<fsGroup> <path to the exported volume>
Volumes required for CMS
The following NFS volumes are required for the CMS deployment. Make sure the exported NFS volumes are empty and have no
data.
Component
NFS volume
name
Description
Example Directory path
CMS
cms-data-
volume
Stores data that is generated by CMS.
/var/vols/itom/cms/data_volume
CMS
cms-config-
volume
Stores CMS configuration files.
/var/vols/itom/cms/conf_volume
CMS
cms-log-
volume
Stores logs generated by CMS.
/var/vols/itom/cms/log_volume
CMS
cms-db-
volume
(Optional) Stores database data of CMS. It is not needed
when external databases are used.
/var/vols/itom/cms/db_volume
Set up self-hosted NFS shared volumes
You can set up an NFS server and NFS shared volumes on any NFS server. We recommend that you use a dedicated NFS
server for the CMS NFS volumes. As an example, the following steps assume that you use a dedicated NFS server and will use
the external databases for CMS.
1
. 
Log on to the NFS server as a root or sudo user.
2
. 
Copy the OMT installation package to a temporary directory on the NFS server.
3
. 
Run the following command to unzip the OMT installation package:
unzip <ITOM_Platform_Foundation_Standard_xxx.zip>
4
. 
Navigate to the ITOM_Platform_Foundation_Standard_xxx/cdf/scripts directory, and then run the following command:
./setupNFS.sh <shared volume> true <user> <fsGroup>
For example:
./setupNFS.sh /var/vols/itom/cms/data_volume true 100001 200001
./setupNFS.sh /var/vols/itom/cms/conf_volume true 100001 200001
Note
The 
<user>
 and 
<fsGroup>
 are configured in the custom 
my-
values.yaml
 file. Both of which can be set to a
value which is 1999 (default),  or between 100000 and 2000000000.
The NFS server must support NFSv3 or NFSv4.


SMAX 2022.11
Page 
709
This PDF was generated on 25/02/2023 02:18:34 for your convenience. For the latest documentation, always see
https://docs.microfocus.com
.