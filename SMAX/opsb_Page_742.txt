Create NFS volumes for OO
To save information such as configuration files, the information must be stored in a persistent volume provided by a Network
File System (NFS). To install Operations Orchestration (OO), you need to export NFS volumes to store the application data.
The storage technology that provides NFS implementation must support the Kubernetes persistent mount option of 
ReadWriteM
any
. That means a storage volume can be mounted to multiple nodes in read/write mode in parallel.
Each NFS exported volume must have the following settings:
rw
sync
Be configured in the 
/etc/exports
 file with the following text:
/<path to the shared folder on the NFS server> (rw,sync,anonuid=<user>,anongid=<fsGroup>,root_squash)
Where the 
<user>
 and 
<fsGroup>
 need to be of the same values as those of the 
global.securityContext.user
 and
global.securityContext.fsGroup
 parameters specified in the custom 
values.yaml
 file. For details, see 
Create
values.yaml for OO
.
Be configured with the following permissions:
chmod -R 755 <path to the exported volume>
chown <user>:<fsGroup> <path to the exported volume>
Volumes required for OO
The following NFS volumes are required for the OO deployment. Make sure the exported NFS volumes are empty and have no
data.
Component
NFS
volume
name
Description
Example Directory
path
Size
OO
oo-config-
vol
Stores OO configuration files.
/var/vols/itom/oo/oo_co
nfig_vol
~ 1 GB
OO
oo-data-vol
Stores OO, OO deployed AutoPass, and OO deployed Vault
generated data.
/var/vols/itom/oo/oo_d
ata_vol
~ 1 GB
OO
oo-logs-vol
Stores logs generated by the majority of OO components.
/var/vols/itom/oo/oo_lo
gs_vol
1-5 GB
OO
oo-data-
export-vol
OO runs a 
cron-job for purging OO database
 with a retention
period set to 375 days (default value). 
All DB data that's marked for purge is exported first and
exposed in this volume before purging. 
/var/vols/itom/oo/oo_d
ata_export_vol
50-90 GB
See notes
below
OO
oo-ras-
logs-vol
Stores OO RAS logs. 
/var/vols/itom/oo/oo_ra
s_logs_vol
1-5 GB
Set up self hosted NFS shared volumes
You can set up an NFS server and NFS shared volumes on any NFS server. It's recommended that you use a dedicated NFS
server for the OO NFS volumes. As an example, the following steps assume that you use a dedicated NFS server and will use
Note
:
The 
<user>
 and 
<fsGroup>
 are configured in the custom 
values.yaml
 file. Both of which can be set to a
value which is 1999 (default), or between 100000 and 2000000000.
The NFS server must support NFSv3 or NFSv4.
Notes:
1
. 
This volume is used by the OO Database Maintenance and Export Kubernetes job. Information on what this
job is and how it uses the NFS volume can be found 
here
.
2
. 
The size of the 
oo-data-export-vol 
volume is directly influenced by two factors:
1
. 
The complexity of the OO flows that OO runs.
OO flows that work with > 1 GB worth of data per flow context, are considered "heavy" flows. This
data is stored in the Database. 
2
. 
The number of tenants.
More tenants means more data in the Database that will be eventually exported in this NFS volume.
SMAX 2022.11
Page 
742
This PDF was generated on 25/02/2023 02:18:34 for your convenience. For the latest documentation, always see
https://docs.microfocus.com
.