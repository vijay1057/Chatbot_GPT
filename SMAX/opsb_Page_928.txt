Configure EFS for OO
OO shares the same Amazon Elastic File System with the SMAX suite.
This section describes how to prepare the OO directory structure in the suite Amazon Elastic File System mount. These
directories will be later referenced in the OO Persistent Volume templates. 
Volumes required for OO
The following volumes are required by OO: 
Component
Amazon Elastic File
System volume name
Description
Example Directory
path
OO
oo-config-vol
Stores OO configuration files.
/var/vols/itom/oo/oo_
config_vol
OO
oo-data-vol
Stores OO, OO deployed AutoPass, and OO deployed Vault
generated data.
/var/vols/itom/oo/oo_
data_vol
OO
oo-logs-vol
Stores logs generated by the OO components, except RAS logs
which are stored in a different volume.
/var/vols/itom/oo/oo_
logs_vol
OO
oo-data-export-vol
OO runs a 
cron-job
 for purging OO database with a retention
period set to 375 days (default value). 
All the database data that's marked for purge gets exported
first and exposed in this volume before purging. 
/var/vols/itom/oo/oo_
data_export_vol
OO
oo-ras-logs-vol
Stores OO RAS logs. 
/var/vols/itom/oo/oo_
ras_logs_vol
Configure Amazon Elastic File System volumes for OO
1
. 
Log in to the bastion with the following command:
ssh -i <private_key_pem_file> centos@<bastion_ip>
2
. 
Copy and save the following script as
 configureOOEFS.sh
:
#!/bin/bash
if [ $# -lt 1 ]; then
    echo "Usage: $0 <efs server fqdn>"
    exit 1
fi
CURRENTDIR=$(cd "$(dirname "$0")";pwd)
suite_user_uid=$2
suite_user_gid=$3
mount_point=/mnt/oo
efs_server=$1
if [ ! -d $mount_point ]; then
    sudo mkdir -p $mount_point
fi
export TIMEOUT_FOR_SERVICES=120
mountEFS() {
    local n=0
    while :; do
        n=$(($n + 1))
        if [[ $n -ge $TIMEOUT_FOR_SERVICES ]]; then
            echo "Check timeout for mount EFS"
            exit 1
        fi
        sudo mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2 $efs_server:/ $mount_point
        if [ $? -eq 0 ] || [ $? -eq 32 ]; then
            echo "Successfully mount EFS"
Note
: The 
private_key_pem_file
 and 
bastion_ip
 are created during the SMA installation.


Note
: Take the 
Example directory path
 as the directory path of Amazon Elastic File System volumes
required for OO.


SMAX 2022.11
Page 
928
This PDF was generated on 25/02/2023 02:18:34 for your convenience. For the latest documentation, always see
https://docs.microfocus.com
.